---
title: 'Vue-Notes '
date: 2025-11-25
permalink: /posts/2025/11/Vue-Notes/
tags:
  - Real Work Practice
---

基于AI，通过UI设计图,尝试自己实现前端界面，以防年底有问题，[vue3菜鸟教程](https://www.runoob.com/vue3/vue3-tutorial.html)



# Webstorm使用记录

* 下载并安装:[webstorm](https://www.jetbrains.com/webstorm/)
* 注释快捷键：ctrl + L
* 浏览器F12后使用：ctrl+shift+C选中某个元素查看其宽度等信息

# 创建一个Vue项目

## Vue环境配置

* 安装Node.js:https://nodejs.org/en/download
  * 点击下方的windows Installer 
  * 下载完成后，点击安装necessary tools获取所有必须的工具
  * 安装完成后，win+R，输入node -v 和 npm -v 分别检查node.js和npm的版本信息
* 安装vue cli：vue.js的官方命令行工具，用于快速搭建Vue项目
  * 命令行执行：**npm install -g @vue/cli**
* 验证vue cli 是否创建成功：vue --version

## 创建并使用VScode打开Vue项目

### 命令行创建

* 打开终端并切换到指定目录：【以windows上为例，e:】
* 执行命令创建项目：vue create 项目名称
* 根据提示手动选择一个后等待运行结束
* 创建完成后后打开创建的文件夹

### webstorm创建

* 类似于pycharm

# 运行Vue项目

## 首次打开Vue项目

* 首次打开Vue项目时，通常需要安装依赖
  * 选择顶部【Terminal】->【New Terminal】
  * **执行命令安装依赖：npm install**
  
* 在webstorm中，**运行以下命令启动Vue项目：npm run serve** 

  * 等待命令启动完成后，终端出现如下内容

    ```
      App running at:
      - Local:   http://localhost:8080/
      - Network: http://172.16.168.168:8080/
    ```

    * 浏览器打开Local可以看到实际的界面

## WebStorm 配置run或debug

* 左侧侧边栏的【...】，点击出run和debug
* 下方编辑器和运行框点击【run】后点击【run configuration】
* 选择【Add new run configuration】后，选择【npm】
* 在下方创建的npm中需要设置：
  * **Name：取一个名字**
  * **command：run**
  * **Scripts：serve**
* 【apply】-【ok】
* **start 和 debug的绿色按钮在顶部**

# 具体开发

## VUE项目换源

```shell
# 配置npm淘宝镜像（推荐）
npm config set registry https://registry.npmmirror.com

# 验证配置是否生效
npm config get registry
# 输出 https://registry.npmmirror.com 即配置成功
```

* 换源后下载：npm install element-plus --save

  

## VUE项目中增加一个新的页面

创建新的页面，通常会放在src/views目录下

* 创建src/views文件夹
* 创建新页面的vue文件：src/views/starlink.vue

## 使新增页面可以访问

要使得这个新的页面可以通过路由访问，需要在Vue Router配置文件中添加对应的路由

* step1: 打开/创建 src/router/index.js

* step2: 在 routers数组中添加一个新的路由配置

  ```vue
  import {createRouter, createWebHistory} from 'vue-router';
  import Home from '../views/Home.vue';
  import KeyInfrastructure from "../views/KeyInfrastructure.vue"; //导入新页面
  
  const routes = [
      {
          path: '/',
          redirect: '/home', //根路径重定向到/home
      },
      // 下面部分是每个路径的页面
      {
          path: '/home',
          name: 'Home',
          component: Home,//对应Home.vue
      },
      {
          path: '/',  // 配置路由路径
          name: 'KeyInfrastructure',
          component: KeyInfrastructure,  // 关联到 KeyInfrastructure 组件
      },
  ];
  
  const router = createRouter({
      history: createWebHistory(process.env.BASE_URL),
      routes,
  });
  
  export default router;
  ```

  * 上面部分是页面创建后的路由示例

  ### 新增页面后还需要在导航栏配置路由

  ```vue
   <li><router-link to="/Task-Management" exact-active-class="active">探测任务管理</router-link></li>
  ```

## Vue项目启动页面修改

**将默认的app.vue修改为src/views/Homepage.vue**

在 Vue 项目中，`App.vue` 通常作为根组件，在应用启动时是第一个渲染的组件。为了让 `HomePage.vue` 成为启动页面，你可以让 `App.vue` 只负责渲染路由组件

* step1: 确保 `App.vue` 中有 `<router-view />`，这是一个占位符，路由会根据配置来渲染对应的组件。

App.vue修改后的代码

```
<template>
  <div id="app">
    <router-view></router-view>  <!-- 这里会显示当前匹配的路由组件 -->
  </div>
</template>

<script>
export default {
  name: 'App',
}
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
</style>
```

## 对src/views文件夹下的vue页面设置统一的布局

### 使用全局样式文件

创建一个全局的 CSS 或 SCSS 文件，在其中定义统一的颜色、字体、布局等样式。然后在 Vue 项目中引入这个全局样式文件。这样，`views` 文件夹下的所有页面都会应用这些样式。

* 创建目录：src/styles

  * 创建global.css文件用于统一配置页面格式

  ```
  
  ```

  

* 在main.js顶部引入全局样式文件

  ```js
  import './styles/global.css' // 引入全局样式文件
  ```

## 关于Vue的各个部分作用

### script部分

用于引入依赖库和components组件

```vue
<script setup>
import NavigationBar from '@/components/NavigationBar.vue'; // 导入 NavigationBar 组件
</script>
```

### template部分

用于构建所有的文字、图片、链接等内容部分，同时可以引入import的各类组件

```vue
<template>
  <div class="home-page">
    <!-- 使用 NavigationBar 组件 -->
    <NavigationBar />
    <!-- 使用 flex 布局，将标题和文字的容器和图片容器放在左右两边 -->
    <div class="main-container">
      <!-- 设置标题和文字的容器 -->
      <div class="title-and-text-container">
        <!-- 标题 -->
        <div class="big-text">
          卫星互联网全景地图
        </div>
        <!-- 文字 -->
        <div class="content-text-container">
          <p class="content-text">
            XXXXXXX
          </p>
          <!-- 新增的超链接，放在新的行中 -->
          <div class="link-container">
            <a href="https://starlink.com/" class="link">Starlink官网首页</a>
          </div>
        </div>
      </div>
      <!-- 设置图片容器 -->
      <div class="image-container">
        <img class="right-image" src="@/assets/HomePageMap.png" alt="Right Image" />
      </div>
    </div>
  </div>
</template>
```

### Style部分

用于创建template部分的详细布局

## global.css

* src/styles/global.css

* 全局可import的基础参数

  ```
  /*基础参数设置,可全局引用*/
  :root {
      /*颜色*/
      --background-color: #000;  /* 背景颜色-黑色 */
      --text-color: #ddd;        /* 文字颜色-浅灰色 */
      --title-color: #00b8f0;    /* 标题颜色 */
      --link-color: blue;        /* 链接颜色 */
      /*字体*/
      --font-family: Arial, sans-serif; /* 字体 */
      --font-size-large: 5rem;    /* 标题大字体 */
      --font-size-medium: 1.5rem; /* 中等字体 */
      --font-size-small: 1rem;    /* 小字体 */
      /* 间距*/
      --container-padding: 20rem; /* 设置左右内边距为 25rem，增加左右黑色边距 */
      --main-container-height: 600px; /* 主容器高度 */
      --header-footer-padding: 1rem; /* 头部和底部内边距 */
      --link-font-size: 100px;  /* 链接字体大小 */
  }
  ```

* 全局样式

  ```vue
  body {
      background-color: var(--background-color);
      color: var(--text-color);
      font-family: var(--font-family);
      margin: 0;
      padding: 0;
  }
  ```

* 全局定义的容器样式-在其他vue的<div class="title-text"> 引号中间调用样式即可

```
/* 页面容器 */
.page-container {
    min-height: 100vh; /* 页面最小高度为视口高度 */
    margin: 0;
    padding: 0 var(--container-padding); /* 设置左右内边距 */
    font-family: var(--font-family);
}
```

### 当中定义class并在不同的vue使用的问题

**global.css全局配置引入却没有起效**

* 现象：src/style下面增加了global.css 配置，同时在main.js中   import './styles/global.css'   但是在src/views/HomePage.vue当中没有起到作用

* 原因：如果在HomePage.vue中有scoped样式，会使得该组件的央视局部作用，不会继承全局样式

* 解决方案：

  * 确保main.js中import的路径是正确的

  * vue页当中，需要在template页面明确引入的是global.css当中定义好的格式类型

    ```vue
    <template>
      <div class="page-container">    <!--引入global.css当中的统一界面组件，而不是此界面单独定义的-->
      </div>
    </template>
    ```

**上面的问题定义即为global.css当中的统一配置使用的具体方式**

## 两个container中间的空白间隔太大的格式调整

浏览器页面Ctrl+Shift+C选中元素查看其宽度，如果间隔太大，增加margin进行调整，否则其使用的是默认margin



## Component当中创建一个通用组件且只提供部分样式参数，其他的样式在调用后传入

以创建一个圆角矩形且只设置背景，其他参数在被import后自定义配置

* 创建RectangleBox组件，使用props接收外部传入的样式

  

* 具体调用的时候传入不同的样式或内容



## 在Vue界面中放入图片

```
   <!-- 使用 flex 布局，将标题和文字的容器和图片容器放在左右两边 -->
    <div class="main-container">
      <!-- 设置标题和文字的容器 -->
      <div class="title-and-text-container">
        <!-- 标题 -->
        <div class="big-text">
          卫星互联网全景地图
        </div>
        <!-- 文字 -->
        <div class="content-text-container">
          <p class="content-text">
            <span class="indent"></span>Starlink在自然灾害救援、俄乌冲突等重大国际性事件中展现出的战略通信支撑能力，引发各国对其潜在军事用途的高度关注。在这一背景下，围绕Starlink系统的关键基础设施、关键业务设备及相关拓扑关系开展系统研究，形成全景地图。为后续实现各类分析及反制措施提供有效数据支撑。
            <a href="https://starlink.com/" class="link">Starlink官网首页</a>
          </p>
        </div>
      </div>
      <!-- 设置图片容器 -->
      <div class="image-container">
        <img class="right-image" src="@/assets/HomePageMap.png" alt="Right Image" />
      </div>
    </div>
```



## Component文件夹

**此文件夹下的东西都是可以调用和渲染的组件**

### 导航栏

```
<template>
  <nav class="navigation-bar">
    <ul>  // 列表，包含5个li元素
      <li><router-link to="/">首页</router-link></li>
      <li class="dropdown">
        <a href="#">关键基础设施</a>
        <div class="dropdown-content">
          <a href="#">基础设施 1</a>
          <a href="#">基础设施 2</a>
          <a href="#">基础设施 3</a>
        </div>
      </li>
      <li class="dropdown">
        <a href="#">探测结果</a>
        <div class="dropdown-content">
          <a href="#">结果 1</a>
          <a href="#">结果 2</a>
          <a href="#">结果 3</a>
        </div>
      </li>
      <li class="dropdown">
        <a href="#">探测任务管理</a>
        <div class="dropdown-content">
          <a href="#">任务 1</a>
          <a href="#">任务 2</a>
          <a href="#">任务 3</a>
        </div>
      </li>
      <li class="dropdown">
        <a href="#">全景展示图</a>
        <div class="dropdown-content">
          <a href="#">展示图 1</a>
          <a href="#">展示图 2</a>
          <a href="#">展示图 3</a>
        </div>
      </li>
    </ul>
  </nav>
</template>

<script setup>
// 这里没有额外的 JavaScript 逻辑，导航栏只是一个静态展示
</script>

<style scoped>
.navigation-bar {
  background-color: #333;
  padding: 1rem;
  display: flex;
  justify-content: center;
}

.navigation-bar ul {
  list-style-type: none;
  display: flex;
  gap: 2rem;
}

.navigation-bar li {
  position: relative;
}

.navigation-bar a {
  text-decoration: none;
  color: white;
  font-size: 1.1rem;
}

.navigation-bar a:hover {
  color: #f0a500;
}

.dropdown:hover .dropdown-content {
  display: block;
}

.dropdown .dropdown-content {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #333;
  border: 1px solid #444;
  min-width: 160px;
}

.dropdown .dropdown-content a {
  padding: 1rem;
  display: block;
}

.dropdown .dropdown-content a:hover {
  background-color: #444;
}
</style>
```

## Vue项目配置访问的后台

`useFetch` 是一种基于 Composition API 的方法，用来处理 HTTP 请求。它可以结合 `fetch` 或者其它请求库使用。`useFetch` 是一个简洁且易于使用的库，可以帮助简化请求。

* 安装配置：npm install @vueuse/core

### 配置全局API地址

* 根目录下创建：.env文件

  ```
  VITE_API_BASE_URL=http://172.16.168.168:8080/api
  ```

  在.env文件中存储配置后台API地址或其他配置项

## 指定参数调用的方法-POST、DELETE...

接口调用时一般默认是Get，如果修改为其他的方式，需要显式指定

```vue
function generateButtons(task) {
  const buttons = [];
  const taskName = task.taskName;
  // 设置默认的按钮和颜色
  const defaultButtonColor = '#00006D';
  const firstButtonText = '启动探测';
  const secondButtonText = '回收数据';
  switch (taskName) {
    case '卫星TLE数据':
      buttons.push({
        text: firstButtonText,
        color: defaultButtonColor,
        url: `${API_BASE_URL}/${TriggerUpdateStarlinkTleDataUrl}`,
        method: 'POST', // 在这里显式指定方法
      });
```

* 同时，需要在对应的组件中增加button的method方法的接收, 在method方法中确保处理了method 

```vue
// TaskManagementBox.vue
<template>
  <div class="rectangle-box" :style="customStyles">
    <p class="rectangle-text" :style="mergedLineOneStyles">{{ lineOne }}</p>
    <p class="rectangle-text" :style="mergedLineTwoStyles">{{ lineTwo }}</p>

    <!-- 渲染按钮列表 -->
    <div class="button-container" v-if="buttons && buttons.length > 0">
      <button
          v-for="(button, index) in buttons"
          :key="index"
          :style="{ backgroundColor: button.color }"
          @click="handleButtonClick(button.url,button.method)"
          class="action-button"
      >
        {{ button.text }}
      </button>
    </div>
  </div>
</template>
<script>
      methods: {
    async handleButtonClick(button) {
      // 获取按钮的 URL 和 method
      const { url, method } = button;
      // 打印出传递的 method
      console.debug('点击的按钮方法:', method);
      // 选择不同的请求方法
      try {
        if (method === 'POST') {
          // 发送 POST 请求
          const response = await axios.post(url);
          console.log('POST 请求成功:', response);
        } else {
          // 默认使用 GET 请求
          const response = await axios.get(url);
          console.log('GET 请求成功:', response);
        }
      } catch (error) {
        console.error('请求失败:', error);
      }
    }
  }
 </script>   
```



# 遇到的问题

## npm在terminal上执行报错

* 现象：terminal执行：npm -v后，报错【npm : 无法加载文件 D:\nodeJS\npm.ps1，因为在此系统上禁止运行脚本。   vscode上运行报错这个】

* 原因： Windows PowerShell 默认禁止执行脚本，这包括 `npm.ps1` 脚本。为了解决这个问题，你需要更改 PowerShell 的执行策略，使其能够运行脚本。
* 解决方法：修修改PowerShell执行策略
  * **PowerShell中输入以下命令：Get-ExecutionPolicy**
    * **如果显示的是Restricted，表示PowerShell禁止运行脚本**
  * 执行以下命令修改策略：Set-ExecutionPolicy RemoteSigned
    * **执行上面命令后输入: Y即可**
  * 关闭webstorm，重新打开后再terminal后再次输入npm -version 确认可以执行

##  import.meta.env.VITE_API_BASE_URL提示找不到

* 现象：根目录创建了.env文件并配置了 VITE_API_BASE_URL=http://172.16.168.168:8888/api 之后在其他文件使用 import.meta.env.VITE_API_BASE_URL提示找不到

* 原因：








------

