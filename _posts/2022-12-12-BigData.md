---
title: 'BigData'
date: 2022-12-12
permalink: /posts/2022/12/BigData-Intro/
tags:
  - Theoretical Ground
  - System Optimization
---

Some Big Data related notes.

# 背景

## 起源

*  2004年---Google的三篇论文：分布式**文件系统** GFS、大数据分布式**计算框架** MapReduce 、NoSQL **数据库系统** BigTable。
  * 解决的问题：搜索引擎中网页抓取&索引构建产生的**<u>大量存储和计算问题</u>**。
* 2006年---DoungCutting 分离Nutch中的大数据相关功能，产生Hadoop(分布式文件系统HDFS+大数据计算引擎MapReduce)
*  Facebook发布Hive，支持使用sql语法进行大数据计算(sql转成MapReduce计算程序)。
* 2012年---Yarn 资源调度框架开始。
  * 解决的问题：MapReduce既是执行引擎，又是资源调度框架。Yarn出现，将MapReduce优化为单独的执行引擎。
* 2012年---UC 伯克利 AMP 实验室（Algorithms-Machine-People）开发Spark 。
  * 解决的问题：
    * MapReduce进行ML计算性能差，MapReduce每执行一次Map和Reduce都要重启代码。
    * MapReduce 使用磁盘作为存储介质，2012 年时，内存已经突破容量和成本限制，成为数据运行过程中主要的存储介质。

## 大数据计算处理方式

* **批处理计算/大数据离线计算**：MapReduce、Spark 这类计算框架处理的业务场景。通常针对以“天”为单位产生的数据进行一次计算，然后得到需要的结果，计算需要花费的时间大概是几十分钟甚至更长的时间。

  * 批处理计算的数据非在线得到的实时数据，而是历史数据，因此是离线计算。

* **大数据流计算/大数据实时计算**：对实时产生的大量数据进行即时计算。eg：监控摄像头进行人脸识别和嫌犯追踪。

  * 流计算框架：Storm、Flink、Spark Streaming 。

* 典型大数据业务场景下，数据业务最通用的做法：

  * 批处理技术处理历史全量数据，采用流式计算处理实时新增数据。

    PS: 类似Flink 的计算引擎，可同时支持流式计算和批处理计算。

* **NoSQL 系统处理**：大规模海量数据的存储与访问。

* **移动计算代码：** 将代码分发到数据的位置进行计算 instead of 将数据传到代码所在位置。【数据量>> 代码量，移动代码到数据所在位置计算的成本更小。】

  具体实现

  * 大规模数据存储在集群服务器上。【使用HDFS分布式文件存储系统，将文件分成很多block，以块为单位存储在集群的服务器上。】
  * 大数据引擎根据不同服务器计算能力，在每台服务器上启动若干分布式任务进程等待任务分配。
  * 使用大数据计算框架支持的编程模型进行编程。【eg：MapReduce、Spark 的 RDD】 
  * Hadoop 或者 Spark 的启动命令执行这个应用程序的 JAR 包。【执行引擎解析程序要处理的数据，根据输入数据量的大小，将数据分片（Split），每个数据片分配给一个任务进程去处理。
  * 任务执行进程收到分配的任务后，检查自己是否有任务对应的程序包，如果没有就去下载程序包，下载后通过反射的方式加载程序。走到这里，最重要的一步-移动计算就完成了。
  * 加载程序后，任务执行进程根据分配的数据片的文件地址和数据在文件内的偏移量读取数据，并把数据输入给应用程序相应的方法去执行，从而实现在分布式服务器集群中移动计算程序，对大规模数据进行并行处理的计算目标。

* 关于HDFS:

  * HDFS也许不是最好的大数据存储技术，但依然最重要的大数据存储技术。
  * HDFS作为最早的大数据存储系统，存储着最宝贵的数据资产。新的框架、算法要想应用就必须支持HDFS。
  * Hadoop 分布式文件系统 HDFS 的设计目标: 管理数大量服务器及磁盘，并将其当做一个单一的存储系统进行管理，对应用程序提供数以 PB 计的存储容量，让应用程序像使用普通文件系统一样存储大规模的文件数据。
    * HDFS在一个大规模分布式服务器集群上，对数据分片后进行并行读写及冗余存储。集群中所有服务器的磁盘都可供 HDFS 使用，所以整个 HDFS 的存储空间可以达到 PB 级容量。
    *  HDFS 的两个关键组件：DataNode & NameNode。
      * **DataNode：文件数据的存储和读写操作。**HDFS 将文件数据分割成若干Block，每个 DataNode 存储一部分数据块，这样文件就分布存储在整个 HDFS 服务器集群中。应用程序客户端可**并行**访问这些数据块，提高访问速度。
      * **NameNode：整个分布式文件系统的MetaData（文件路径、数据块ID、存储位置信息）管理，相当于操作系统中文件分配表FAT**。为保证数据的高可用，会将一个数据块复制为多份（缺省情况为 3 份），并存储在不同的服务器、甚至不同的机架上。








------

