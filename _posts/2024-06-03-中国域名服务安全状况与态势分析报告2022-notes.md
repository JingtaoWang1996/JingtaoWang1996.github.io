---
title: '中国域名服务安全状况与态势分析报告2022---阅读笔记'
date: 2024-06-03
permalink: /posts/2019/01/Git-commands/
tags:
  - 中国互联网络信息中心&互联网域名管理技术
---

**《中国域名服务安全状况与态势分析报告2022---阅读笔记》**  

​                                                                        

# 摘要部分

* 根服务方面：
  * 2022年新增26个根服务器镜像，全球根服务器&镜像总数达到1500个，国内目前镜像总数22个，新增镜像2个：广西、重庆。
  * 根域名服务对IPV6、DNSSEC、TCP等网络协议支持率100%
* 顶级域服务方面：
  * 2022年底全球顶级域，域名数量达到1497个。
  * 对各类网络协议的支持率：IPV6（90.1%）、DNSSEC（92%）。
* 二级及以下权威域名服务方面：
  * 支持率：IPV6(12.8%,从去年的4%提升到12.8%；国内重点权威域名支持率52%)
* 递归域名服务方面：
  * 支持率：DNSSEC（1.5%）、TCP（52.2%）、EDNS0（98.8%）
  * 国内主要递归域名服务在安全协议支持程度上远高于国内递归域名服务平均水平。

# 前言

* CNNIC基于自主建设的国家互联网**基础资源大数据平台**和**态势感知平台**，通过全球分**布式部署的100多个监测节点**（涵盖亚洲、美国、欧洲主要国家），实现从安全、性能、故障、流量、配置五个方面对我国域名服务体系下的根、顶级域、二级域及以下的域名、递归服务的监测与分析。
* 分析内容涵盖：NS配置、服务时延趋势、端口随机程度、TCP/EDNS0/IPV6支持、DNSSEC、**bind版本**自动化检测。

# 域名服务安全状况

**根、顶级域、二级及以下权威和递归等四个环节在系统软件、协议支持、服务性能等涉及服务安全状况的关键方面的配置运行情况**

## 根

* 根域名服务位于整个权威域名层级结构的最顶端，全球共设立了13 个根服务器（10 个位于美国，其它3 个分别位于瑞典、荷兰和日本），分别由美国威瑞信公司、南加州大学信息科学研究所、美国Cogent Communications 公司、美国马里兰大学学院市分校、美国航天航空管理局（NASA）、美国互联网系统联盟
  （ISC）、美国国防部国防信息系统局、美国国防部陆军研究所、瑞典Netnod 公司、荷兰RIPE NCC、互联网名称与数字地址分配机构（ICANN）和日本WIDE Project 等12 家境外机构负责运营。

* 为保证其高可用性及抗攻击能力，自2002 年以来，各根服务器在全球范围内进行了广泛的镜像部署，以此扩展其全球服务能力，提升其安全性。
* 目前，13个根域名服务器均部署了不同数量的镜像服务器。**截至2022 年12 月31 日，全球根服务器已共计部署镜像1500 个（较去年同期新增26 个）**。
* 各根服务器镜像数量-2022年：
  * A-M:56、6、12、194、328、344、6、12、77、157、105、190、13

### 系统软件

* **监测显示**：[ref：2.1.2系统软件]
  * OS: 目前所有根域名服务器均使用：Unix 或者Linux作为操作系统。
  * 域名解析软件：**大多数根服务器使用 ISC BIND**，也有个别服务器使用了 NLnetLabs NSD 和 Knot DNS 等其他软件。
  * **ISC BIND仍是根域名服务器运营机构的首选**

### 协议支持

* 解决域名劫持风险的有效方案：部署DNSSEC验证服务，通过对DNS通信数据的数字签名验证来确信数据有效。
* **监测显示**，目前根域名服务器均已部署DNSSEC验证服务，数据加密算法RSA/SHA-256。
* 目前13个根均已配置IPV6地址，从而实现对IPV6查询的全支持。
  * 传统数据包通过UDP传输，大小在512字节内，无法满足大数据包传输需求。
    * 因此**超过512字节的数据包应该开启EDNS0支持**，或采用TCP代替UDP传输。
  * **监测显示**，根域名服务系统均已支持TCP 和 EDNS0传输。其在协议支持程度方面已基本趋于完善和稳定，DNSSEC、ipv6、TCP支持率为100%。

### 服务性能

* 全球1500个已部署根镜像，有22个位于我国大陆。【根镜像的引入有效减少平均时延，改善上网体验，增强我国常态下的域名服务保障能力】

## 顶级域服务

* 主要包含两类：
  * 通用顶级域(gTLD): .com、net.等传统通用顶级域 +  新扩展的网络（.xyz,.vip等新通用顶级域）。
  * 国家顶级域名(ccTLD): .cn、.中国；德国的.de；英国的.uk;
    * 根据《信息社会世界首脑会议-信息社会突尼斯议程》：一个国家对于本国ccTLD的管理决策不受他国干涉。
* 根据IANA官方数据，2022年底，**全球域名服务体系中共存在1497个顶级域。**[ref](https://www.iana.org/domains/root/db)

### 系统软件

* **监测显示**：[ref:2.2.2]
  * OS: 普遍采用Unix 或者Linux作为操作系统。
  * 域名及解析软件：**2022的监测数据显示**，3类常用软件使用占比：
    * Meilof Veeningen Posadis: 48.89。
    * NLnetLabs NSD :33.01。
    * ISC BIND:14.1%。【**现有的安装ISC BIND的24.16%顶级域仍然开启了版本应答功能，具有一定安全隐患，本报告建议相关顶级域名运营结构及时关闭此项功能**。】

### 协议支持

* 截止20221231,92%的顶级域部署了DNSSEC验证服务。
  * 所支持的加密算法仍以RSA/SHA-256和 RSASHA1-NSEC3-SHA1为主，两者占比94.6%。
  * 3.04%的DNSSEC顶级域服务器采用传统的NextSECure(NSEC)机制，**NSEC** 具有取文件被遍历，枚举从而泄露所管理的域名解析数据的风险。
* 2022年底，3大协议的支持率：DNSSEC:92%;IPV6:90.1%;TCP100%.

### 服务性能

* **监测显示**，顶级域均实现冗余配置（该域名服务器拥有的服务地址多少反应冗余配置程度), 平均每个顶级域的服务地址从8.8增长到今年的8.82，8成以上顶级域拥有7个以上服务器。
  * 较高的冗余配置能够增强服务的鲁棒性和抗攻击能力，但也增加了服务器之间域名数据的不一致性。
    * **监测显示**，2.4%的顶级域具有授权数据不一致的问题，导致返回给用户的dns信息不一致。
  * 权威域名服务器开启递归服务冗余遭受DDoS攻击，**监测显示**，3%的顶级域服务器开启递归服务。
  * 权威域名服务器通过设置TTL来决定权威数据在递归服务器中的缓存时间：
    * 较大ttl值会导致递归服务器中缓存时间过长而过期。
    * 较小的ttl值会因频繁缓存数据更新和传输增大通信开销。
    * 接近6成的顶级域ttl值被设定在1天以上（>86400s）

## 二级及以下权威域名服务

* **监测数据显示**，2022年12月我国的二级以下权威服务器大约有1.1万套（按照独立NS数量计算）。

### 系统软件

* **监测数据显示**：
  * OS: Unix & Linux (73.8%)
  * 域名解析软件：**ISC BIND(59%)、Meilof Veeningen Posadis（21.01%）**
    * **40.01%的ISC BIND 软件版本仍旧开启版本应答功能。**

### 协议支持

* 监测显示：
  * DNSSEC: 目前仅0.1%的二级及以下权威域名部署了DNSSEC验证服务。
  * ipv6：:12.8%
  * TCP:88%

### 服务性能

* 服务冗余：59.2%。平均每个域拥有的服务器地址数量有去年的4.58增加到4.6个。
* 22.36%的二级及以下权威域名服务器开启了递归服务，**建议避免同时开启递归和权威**。
* 较多而二级及以下的权威域名开始倾向于选择设置较大的TTL值。

## 重点权威域名服务

筛选后的300多个来自政府、金融、网络运营等涉及到国计民生行业的重点权威域名。

* **操作系统**：84.8%-Unix & Linux
* 域名解析软件：69.2%-ISC BIND **(33.2%开启了版本应答)**
* 各个协议：
  * DNSSEC：5% 
  * ipv6：52%
  * TCP:95.8%
* 服务性能：76.88% 增加了冗余配置，平均每个重点权威域名拥有7.42个服务器地址。

## 递归服务

**监测显示**

* OS: UNIX  & LINUX  65.9%  
* 域名解析软件：
  * IS BIND 33.1%  （40.5% 开启版本应答）
  * Meilof Veeningen Posadis  22%  
  * Microsoft windows DNS 15%
* 协议支持：
  * DNSSEC:1.5%
  * TCP:52.2%
  * EDNS0: 98.8%
  * 大数据包支持：98.4%
  * 端口随机成都：100%
* 服务性能：9成以上查询在100ms内完成查询。

## 主要递归服务-公共解析器

* 一种是国内基础电信运营企业所提供的递归域名服务。
  * 国内主要基础电信运营企业（即中国电信、中国联通、中国移动（含中国铁通）
* 另一种是一些大型互联网服务企业所提供的公共递归域名服务。
  * CNNIC1248、114DNS、360、阿里云。【公共递归域名服务】
* 两类递归服务器在全国范围内部署500+台。
* 协议支持：国内主要递归服务器：{EDNS0:98.9%、TCP 98.6%、DNSSEC：2%}
* 服务性能：67.3% 服务器查询时延集中在100ms内。


------

