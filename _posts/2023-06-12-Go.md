---
title: 'Go'
date: 2023-06-12
permalink: /posts/2023/06/Go-notes/
tags:
  - Technical Refer notes
---

Go usage related notes.

# Intro

* 名称为go，golang 主要是便于搜索，2009 年底开源：golang is another name of go。

* 优点：易上手/解决并发编程和底层应用开发效率的痛点/support by google/Docker

​         Ps：goroutine \ channel ：并发and异步编程

* go 文件：.go 

## 编译安装

* [Go 中文网](https://studygolang.com/dl ):推荐下载，根据系统具体情况下载

* 一路next后，进入win+R，输入**go version** 确认是否安装成功

* Hello world:cd 到go文件目录后，go run hello.go

  ```go
  package main
  import “fmt”
  func main(){
     fmt.Println("Hello world!")
  }
  ```

## 基本命令

* go run xxxx：跑go的脚本
* go version：查看go 版本
* go list … ：查看go已经安装的第三方库

# GOLAND

* 登录jetbrains账号：help->register 

## Google GO的开发规范

* 在每个项目文件夹下建立三个文件夹，第4个output可为空
  * **bin/** ：生成的执行文件
  * **pkg/** ：编译的中间文件
  * **src/**   : 程序的代码文件
    * main.go 在src/main/这个目录下，类似于java的包
  * **output/ **:编译后生成的可执行文件的存放目录。
* 遵循Google的开发建议，**每个项目都建立自己独有的PATH**。
  * File->Setting->Go->Go path 
  * 在project path 中新增一个本项目的project path 
  * 

## 创建新工程

* 对于创建的文件，需要设置**run configuration**
  * Run kind：设置为Directory
  * Directory：设置main包所在的目录，不能为空。
  * OutputDirectory：设置**编译后生成的可执行文件的存放目录**，可以为空，为空时默认不生成可执行文件；
  * Working directory：设置程序运行目录。
* 遵循

# 第三方库安装

goland安装第三方库不需要单独设置解释器，goland会自动使用go工具链：

* 只需打开终端运行：**go get** github.com/likexian/whois(目标Go库)
* 再次引用时，直接选择fix dependency，就会在go.mod文件中自动添加依赖、**包括版本信息**

## goland 安装第三方库

* 打开终端：底部terminal
* 初始化go模块（如果还没有的话）：go mod init 模块名
* 安装库-terminal执行命令：go get <库名>
* 查看go.mod 文件：安装成功后，库会被添加到你的go.mod文件中。

## go换源

* **terminal上这两行任选一行执行** （目前是执行的第二行）

```
go env -w GOPROXY=https://goproxy.cn,direct
go env -w GOPROXY=https://mirrors.aliyun.com/goproxy,direct
```

* 执行如下命令确认GOPROXY是否配置成功：go env

  * 在输出中查看GOPROXY列是否满足：**GOPROXY=https://mirrors.aliyun.com/goproxy,direct**

  

# 语法糖

* **简短变量声明符号**： “:=”-- 关键词var或者直接使用简短变量声明符号来对变量进行声明，尤其是接收函数返回值。(Eg：a :=foo1();  a,b := foo2();)

* 使用规则：
  * **变量可以通过 :=** **被重复声明和赋值**
  * *不能用于函数外部声明全局变量**

* **可变参数：函数的某个参数可有可无（参数类型前面加上： …** **表示）**eg：fmt.Println(a …interface{})
* 使用规则:
  * 可变参数必须在函数尾部
  * 可变函数不填时**当做****nil处理（Go** **中 None** **是nil****）**
  * 可变参数在函数内部做切片来解释（range 遍历）
  * 可变参数需要是相同类型（不同类型，则仿照上面用interface{}处理）

# 问题记录

* 报错：package command-line-arguments is not a main package

​       现象：idea 无法编译。

​       解决方案：需要将package xxx 改为package main 【根据提示修改名称即可运行】

* 报错：go get 无法下载第三方库

  解决方案：go env 查看代理 & go env -w GOPROXY=https://goproxy.cn,direct & go env -w GOSUMDB=off  （关闭包的有效性验证）


------

